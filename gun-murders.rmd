---
title: "edX Gun Murders"
author: "Irene Shea"
date: "3/16/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

When we started talking about Gun Murders in edX I had a very "oh no" moment. Texas, the state of my heart, has a reputation of being full of gun-slinging cowboys. Maybe it's just been the current atmosphere of things, but when we started working with this dataset, I was afraid this report would devolve into another state-bashing session. It might be a stereotype that Texans love their state the best, but it's a true one, and I wasn't excited for some Massachusetts Yankee to come in and wag their finger at us, Harvard professor or not. As it turns out, Texas did not rank the highest on gun murders across the 50 states, but the South does have a higher rate of death by gun than any other region of the country. So, maybe the stereotype isn't entirely unfounded.

Disclaimer: This is a practice report. It does not seek to investigate why the murder rates differ between states. In addition, the findings below are based on data from 2010 on US Gun Murder Rates found on Wikipedia (<https://en.wikipedia.org/wiki/Murder_in_the_United_States_by_state>) and are not indicative of what gun murder rates are today, more than a decade later.

I used the following libraries and pre-wrangled data:

```{r libs, message = FALSE}
library(dslabs)
library(tidyverse)
data(murders)
```

##Focus Question

Does Texas actually live up to its reputation as a dangerous gun-toting cowboy state? 

## State Population and Gun Deaths

At first I wanted to compare state sizes with gun deaths, but I quickly realized this data table does not include land mass when factoring in the number of deaths so it's probably related to population size. Occam's Razor would state that states with the largest populations probably have the most gun deaths, and the smallest states probably have the least. So I tested that with the code below.

```{r plot-pop-vs-gun-deaths, echo = FALSE}
murders %>% 
  mutate(abb = reorder(abb, population)) %>% 
  ggplot(aes(abb, total)) + 
  geom_histogram(stat = "identity", fill = "skyblue") + 
  ggtitle("State Gun Murder Totals") + 
  coord_flip()

```

Here, state abbreviations are ordered by population size with the bar length indicating total number of deaths. California has the largest population and the most gun deaths. Though Wyoming doesn't have the lowest gun deaths, it does have the smallest population. I confirm my observations below.

```{r largepop, echo=FALSE}
murders$state[which.max(murders$population)]   
which.max(murders$population) == which.max(murders$total)
```

California has the largest population and the most gun deaths by total.

```{r smallpop, echo=FALSE}
murders$state[which.min(murders$population)]
which.min(murders$population) == which.min(murders$total)
```

Wyoming has the smallest population, but it does not have the least gun deaths by total.

So it's not just population size that contributes to gun deaths. There must be something else at work.

Because states all have different population sizes, it would be more fair to compare murder rates rather than murder totals. With all the states on equal footing, I determined which states were above average in terms of gun deaths.

```{r rate-vs-gun-deaths, echo = F}
murders <- murders %>% mutate(rate = total/population*10000)   
ave_deaths <- mean(murders$rate)
murders %>% 
  mutate(abb = reorder(abb, rate)) %>% 
  ggplot(aes(abb, rate)) + 
  geom_histogram(stat = "identity", fill = "skyblue") + 
  ggtitle("State Gun Murder Rates") +
  coord_flip() +
  geom_hline(yintercept = ave_deaths, linetype = "dashed", color = "red", size = 1.5)
```

Based on the graph, we can see the District of Columbia has highest and Vermont has the lowest rate of gun deaths. It also looks like approximately half of the states have rates of gun murder above the national average. The 24 states that have above average rates of gun murders are shown below in order from highest to lowest.

```{r rank-above-ave-deaths, echo = FALSE}
murders %>% 
  filter(rate >= ave_deaths) %>% 
  mutate(rank = rank(-rate)) %>% select(rank, state) %>% arrange(rank)
```

I was surprised Louisiana, Texas's neighboring state ranked as high as it did, so I wanted to see if maybe there were trends across regions. Were there some regions with higher gun murder rates than others?

```{r boxplot-no-label, echo = F}
murders %>%  #generating boxplots
  group_by(region) %>% 
  ggplot(aes(region, rate, fill = region)) + 
  geom_hline(yintercept = ave_deaths, color = "red") +
  geom_boxplot() + 
  geom_point() + 
  ggtitle("Boxplot Regions Gun Murders")
```

Compared to the other regions, the South has the highest rates of gun murder; the entirety of its IQR sits above the national average. However, the outlier surprised me. Which state was that? Wasn't the state with the highest murder rate DC? 

```{r where-is-DC, echo = FALSE}
murders %>% filter(state == "District of Columbia") #confirm DC region listed as "South"

```

